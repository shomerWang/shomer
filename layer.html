<html>
<head>
	<meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/>
	<title>TGOS MAP API</title>
	<!--呼叫TGOS MAP API (lite)-->
	<script type="text/javascript" src="https://api.tgos.tw/TGOS_API/tgos?ver=2&AppID=QDAAHq0tDwP/ep7jf+cmix0evDCCC1nSYoPYCN6s+ZNji8hea9HpIw==&APIKey=cGEErDNy5yN/1fQ0vyTOZrghjE+jIU6uqR/SpKtKRvCyA2ZlRy2jr/mqsD2a+38Ni72oII9GxSumbI7z3MTcZwRkSz2fP208rqoJ7r3Yt92Jt3KziosQoG0+ejB/pqhVDB16C07Y0uuvFVsTx13ZELDoou7eaNvNouhsgEO2nu3ALL5yoWc/6wFO1fLpnYfSVlocA7EVM9zgK1TBs5+9OL4RnckIGPcaC8VeoiHCTzmgUeDfHJBoUylTbvZHEgdJKC0itwClXKo/fA85+PuA1lVlov46watTgLW9VHynvX9XBYzUvhL/zGTi0C6QbAtuCHr4yDoMjmYoWU7iL950rpQk5BM5AmlWk94zhXyFuyuaTADX3aGdSaj/HlZMpHLP" charset="utf-8"></script>
	<script type="text/javascript"> 
  var pMap = null;
	var kmlLayer = null;
	function InitWnd() {
		var pOMap = document.getElementById("TGMap");
		var mapOptions = {
			mapTypeControl: false	//mapTypeControl(關閉地圖類型控制項)
		};
		pMap = new TGOS.TGOnlineMap(pOMap, TGOS.TGCoordSys.EPSG3826, mapOptions);	//宣告TGOnlineMap地圖物件並設定坐標系統
	}
	
	function AddKML() {
		if (kmlLayer) {
			 kmlLayer.removeKml();							//假如圖面上已經有KML疊加層, 則先移除掉現有的kml圖層再加入新圖層
		}
		var list = document.getElementById("addurl");
		var url = list.options[list.selectedIndex].text;	//取得下拉選單的KML網址
		kmlLayer = new TGOS.TGKmlLayer(url, {				//設定KML圖層
				map: pMap,									//設定欲疊加的底圖
				suppressInfoWindows: false,				//可點選KML圖徵顯示訊息視窗, 若設為true則無法顯示訊息視窗
				preserveViewport: true						//疊加KML後將圖面縮放至KML的範圍, 若設為false則取消這個功能
            });
	}
</script>            
</head>
<body style="margin:0px" onLoad="InitWnd();">
	<div id="TGMap" style="width:100%; height:90%; border: 1px solid #C0C0C0;"></div>
	<br/>
	<input name="addurl" type="text" ;style="width:200px ;height:30px";>
    <!--建立下拉選單, 提供預設兩組KML網址-->
	<!--<select id="urlList">
		<option>http://api.tgos.tw/TGOS_API/wrarb.kml</option>
		<option>http://api.tgos.tw/TGOS_API/GWREGION.kml</option>
		<option>""</option>
	</select>-->
	<br/>
   	<input type="button" value="加入KML圖層" onClick="AddKML();">
</html>                            
